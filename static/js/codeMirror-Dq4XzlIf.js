import{o as B,T as N}from"./index-PyZVjOxt.js";import{j as S}from"./index-ajHFHD-x.js";import{d as D,e as _,A as d,i as m,c as O,b as l,y as a,O as u,w as i,aP as v,u as y,B as k,F as R,aG as r,bk as U,ae as j,af as E,_ as F}from"./index-CBmakSG_.js";import{d as K}from"./database-J-zeBaYl.js";const x=n=>(j("data-v-4cfba4da"),n=n(),E(),n),M={class:"mb-[10px]"},T={class:"flex"},W=x(()=>l("div",{class:"prepend"},"key:",-1)),$={class:"mb-[10px]"},z={class:"flex"},A=x(()=>l("div",{class:"prepend"},"过期时间:",-1)),G=D({__name:"codeMirror",props:{data:{default:()=>({key:"",value:"",expire:-1,db:"0"})}},setup(n,{expose:h}){const b=[S(),B],e=_(n.data),g=()=>{e.value.key&&K(e.value.key,e.value.db).then(s=>{s.success?s.data.expire===-2?r("该key可用",{customClass:"el",type:"success"}):r("该key已存在",{customClass:"el",type:"warning"}):r(`查询失败: ${s.message}`,{customClass:"el",type:"error"})})},c=_(!1),C=()=>{e.value.key+=U(),c.value=!0},V=()=>{e.value.key=e.value.key.slice(0,-32),c.value=!1};return h({getData:()=>({key:e.value.key,value:e.value.value,expire:e.value.expire}),checkCode:()=>{if(e.value.value.startsWith("{")||e.value.value.startsWith("["))try{JSON.parse(e.value.value)}catch(s){return r(s.message,{customClass:"el",type:"error"}),!1}return e.value.key?!0:(r("请输入key",{customClass:"el",type:"error"}),!1)}}),(s,t)=>{const w=d("el-input"),p=d("el-button"),f=d("el-text"),I=d("el-input-number");return m(),O(R,null,[l("div",M,[l("div",T,[W,a(w,{modelValue:e.value.key,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.key=o),placeholder:"key",onInput:t[1]||(t[1]=o=>c.value=!1)},null,8,["modelValue"]),a(p,{class:"ml-[10px]",onClick:g},{default:u(()=>[a(i(v),{icon:"material-symbols:frame-inspect",width:20,height:20})]),_:1}),c.value?(m(),y(p,{key:0,onClick:V},{default:u(()=>[a(i(v),{icon:"carbon:reset",width:20,height:20})]),_:1})):(m(),y(p,{key:1,onClick:C},{default:u(()=>[a(i(v),{icon:"mingcute:random-fill",width:20,height:20})]),_:1}))]),a(f,{style:{color:"#909399"}},{default:u(()=>[k("会覆盖旧的值")]),_:1})]),l("div",$,[l("div",z,[A,a(I,{modelValue:e.value.expire,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.expire=o),placeholder:"key"},null,8,["modelValue"])]),a(f,{style:{color:"#909399"}},{default:u(()=>[k("-1为不过期,单位秒")]),_:1})]),a(i(N),{modelValue:e.value.value,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.value=o),placeholder:"请输入数据...",style:{maxHeight:"500px",marginBottom:"20px"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:b},null,8,["modelValue"])],64)}}}),Y=F(G,[["__scopeId","data-v-4cfba4da"]]);export{Y as default};
