import{d as S,V as E,D as M,k as D,g as k,e as x,o as L,h as N,c as T,b as l,w as e,y as o,S as Z,O as a,J as H,$,aE as q,b9 as F,a8 as z,aG as B,A as p,i as A,x as G,B as P,ae as J,af as O,_ as j}from"./index-rE24npIh.js";import{h as K,c as W,b as X,f as Y,g as ee,a as I}from"./dark-D926jiUw.js";const _=S({name:"Motion",props:{delay:{type:Number,default:50}},render(){const{delay:n}=this,r=E("motion");return M(D("div",{},{default:()=>[this.$slots.default()]}),[[r,{initial:{opacity:0,y:100},enter:{opacity:1,y:0,transition:{delay:n}}}]])}}),te=k({password:[{validator:(n,r,i)=>{r===""?i(new Error("请输入密码")):r.length<6?i(new Error("密码应为6位字符以上")):i()},trigger:"blur"}]}),oe="/static/png/bg-BbeGHte5.png",se={width:24,height:24,body:'<path fill="currentColor" d="M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"/>'},ae={width:24,height:24,body:'<path fill="currentColor" d="M20 22H4v-2a5 5 0 0 1 5-5h6a5 5 0 0 1 5 5v2Zm-8-9a6 6 0 1 1 0-12a6 6 0 0 1 0 12Z"/>'},ne=n=>(J("data-v-4c0fab49"),n=n(),O(),n),le={class:"select-none"},re=["src"],ie={class:"flex-c absolute right-5 top-3"},de={class:"login-container"},ue=ne(()=>l("div",{class:"img"},null,-1)),ce={class:"login-box"},me={class:"login-form"},pe={class:"outline-none"},fe=S({name:"Login",__name:"index",setup(n){const r=H(),i=$(),h=x(!1),g=x(),{initStorage:C}=K();C();const{dataTheme:v,dataThemeChange:y}=W();y();const{title:Q}=X(),d=k({username:localStorage.getItem("QQBotUsername")||"",password:localStorage.getItem("QQBotPassword")||"",baseUrl:"http://8.140.254.159:10093/mb/"}),w=async s=>{s&&await s.validate((t,u)=>{if(t)b();else return u})},b=({username:s,password:t,baseUrl:u}=d,f=!0)=>{h.value=!0,q().loginByUsername({username:s,password:t,baseUrl:u}).then(m=>{if(m.success)return F().then(()=>{r.push(z(!0).path).then(()=>{B("登录成功",{type:"success"}),f&&(localStorage.setItem("QQBotUsername",s),localStorage.setItem("QQBotPassword",t)),localStorage.setItem("QQBotBaseUrl",u)})});B(m.message,{type:"error"})}).finally(()=>h.value=!1)};i.query.key&&b({username:i.query.key,password:"",baseUrl:"http://8.140.254.159:10093/mb/"},!1);function V({code:s}){s==="Enter"&&w(g.value)}return L(()=>{window.document.addEventListener("keypress",V)}),N(()=>{window.document.removeEventListener("keypress",V)}),(s,t)=>{const u=p("el-switch"),f=p("el-input"),m=p("el-form-item"),U=p("el-button"),R=p("el-form");return A(),T("div",le,[l("img",{src:e(oe),class:"wave"},null,8,re),l("div",ie,[o(u,{modelValue:e(v),"onUpdate:modelValue":t[0]||(t[0]=c=>Z(v)?v.value=c:null),"inline-prompt":"","active-icon":e(Y),"inactive-icon":e(ee),onChange:e(y)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),l("div",de,[ue,l("div",ce,[l("div",me,[o(e(_),null,{default:a(()=>[l("h2",pe,G(e(Q)),1)]),_:1}),o(R,{ref_key:"ruleFormRef",ref:g,model:d,rules:e(te),size:"large"},{default:a(()=>[o(e(_),{delay:100},{default:a(()=>[o(m,{rules:[{required:!0,message:"请输入账号",trigger:"blur"}],prop:"username"},{default:a(()=>[o(f,{modelValue:d.username,"onUpdate:modelValue":t[1]||(t[1]=c=>d.username=c),clearable:"",placeholder:"账号","prefix-icon":e(I)(e(ae))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),o(e(_),{delay:150},{default:a(()=>[o(m,{prop:"password"},{default:a(()=>[o(f,{modelValue:d.password,"onUpdate:modelValue":t[2]||(t[2]=c=>d.password=c),clearable:"","show-password":"",placeholder:"密码","prefix-icon":e(I)(e(se))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),o(e(_),{delay:250},{default:a(()=>[o(U,{class:"w-full mt-4",size:"default",type:"primary",loading:h.value,onClick:t[3]||(t[3]=c=>w(g.value))},{default:a(()=>[P(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])])])}}}),ge=j(fe,[["__scopeId","data-v-4c0fab49"]]);export{ge as default};
