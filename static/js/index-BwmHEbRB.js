import{d as S,V as E,D as M,k as q,g as U,e as x,a_ as D,o as L,h as N,c as T,b as r,w as e,y as o,S as Z,O as n,J as $,$ as H,aE as A,b9 as F,a8 as z,aG as B,A as m,i as G,x as P,B as J,ae as O,af as j,_ as K}from"./index-CBmakSG_.js";import{h as W,c as X,b as Y,f as ee,g as te,a as I}from"./dark-DDOQSSz7.js";const _=S({name:"Motion",props:{delay:{type:Number,default:50}},render(){const{delay:l}=this,i=E("motion");return M(q("div",{},{default:()=>[this.$slots.default()]}),[[i,{initial:{opacity:0,y:100},enter:{opacity:1,y:0,transition:{delay:l}}}]])}}),oe=U({password:[{validator:(l,i,a)=>{i===""?a(new Error("请输入密码")):i.length<6?a(new Error("密码应为6位字符以上")):a()},trigger:"blur"}]}),ae="/static/png/bg-BbeGHte5.png",se={width:24,height:24,body:'<path fill="currentColor" d="M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"/>'},ne={width:24,height:24,body:'<path fill="currentColor" d="M20 22H4v-2a5 5 0 0 1 5-5h6a5 5 0 0 1 5 5v2Zm-8-9a6 6 0 1 1 0-12a6 6 0 0 1 0 12Z"/>'},le=l=>(O("data-v-a3746c3b"),l=l(),j(),l),re={class:"select-none"},ie=["src"],ue={class:"flex-c absolute right-5 top-3"},de={class:"login-container"},ce=le(()=>r("div",{class:"img"},null,-1)),pe={class:"login-box"},me={class:"login-form"},fe={class:"outline-none"},_e=S({name:"Login",__name:"index",setup(l){const i=$(),a=H(),g=x(!1),h=x(),{initStorage:k}=W();k();const{dataTheme:v,dataThemeChange:y}=X();y();const{title:C}=Y(),u=U({username:localStorage.getItem("QQBotUsername")||"",password:localStorage.getItem("QQBotPassword")||"",baseUrl:"http://8.140.254.159:10093/mb/"}),w=async s=>{s&&await s.validate((t,d)=>{if(t)b();else return d})},b=({username:s,password:t,baseUrl:d}=u,f=!0)=>{g.value=!0,A().loginByUsername({username:s,password:t,baseUrl:d}).then(p=>{if(p.success)return F().then(()=>{i.push(z(!0).path).then(()=>{B("登录成功",{type:"success"}),f&&(localStorage.setItem("QQBotUsername",s),localStorage.setItem("QQBotPassword",t)),localStorage.setItem("QQBotBaseUrl",d)})});B(p.message,{type:"error"})}).finally(()=>g.value=!1)};a.query.key&&b({username:a.query.key,password:"",baseUrl:a.query.api?`http://${a.query.api}`:D()},!1);function V({code:s}){s==="Enter"&&w(h.value)}return L(()=>{window.document.addEventListener("keypress",V)}),N(()=>{window.document.removeEventListener("keypress",V)}),(s,t)=>{const d=m("el-switch"),f=m("el-input"),p=m("el-form-item"),Q=m("el-button"),R=m("el-form");return G(),T("div",re,[r("img",{src:e(ae),class:"wave"},null,8,ie),r("div",ue,[o(d,{modelValue:e(v),"onUpdate:modelValue":t[0]||(t[0]=c=>Z(v)?v.value=c:null),"inline-prompt":"","active-icon":e(ee),"inactive-icon":e(te),onChange:e(y)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),r("div",de,[ce,r("div",pe,[r("div",me,[o(e(_),null,{default:n(()=>[r("h2",fe,P(e(C)),1)]),_:1}),o(R,{ref_key:"ruleFormRef",ref:h,model:u,rules:e(oe),size:"large"},{default:n(()=>[o(e(_),{delay:100},{default:n(()=>[o(p,{rules:[{required:!0,message:"请输入账号",trigger:"blur"}],prop:"username"},{default:n(()=>[o(f,{modelValue:u.username,"onUpdate:modelValue":t[1]||(t[1]=c=>u.username=c),clearable:"",placeholder:"账号","prefix-icon":e(I)(e(ne))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),o(e(_),{delay:150},{default:n(()=>[o(p,{prop:"password"},{default:n(()=>[o(f,{modelValue:u.password,"onUpdate:modelValue":t[2]||(t[2]=c=>u.password=c),clearable:"","show-password":"",placeholder:"密码","prefix-icon":e(I)(e(se))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),o(e(_),{delay:250},{default:n(()=>[o(Q,{class:"w-full mt-4",size:"default",type:"primary",loading:g.value,onClick:t[3]||(t[3]=c=>w(h.value))},{default:n(()=>[J(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])])])}}}),ve=K(_e,[["__scopeId","data-v-a3746c3b"]]);export{ve as default};
